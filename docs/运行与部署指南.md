## 一键启动（命令行统一入口）

> 本项目采用传统 Web 工程结构（`src/` + `WebContent/`）。为统一协作与复现环境，建议所有同学都使用命令行脚本启动。

### 1) 前置条件

- Docker：用于启动 MySQL 5.7 容器
- JDK + Maven：若系统未安装，可使用仓库内 `.tools/`（脚本会自动检测）

### 2) 一键启动

在项目根目录执行：

```bash
./scripts/dev-start.sh
```

脚本行为说明：

- MySQL：启动（或复用）容器 `hotelssm-mysql`，端口默认 `3306`
- 数据库：若 `db_hotel_ssm` 为空库，会导入 `db_hotel_ssm.sql`（显式 UTF-8，避免中文乱码）
- Web：构建并以 Jetty 启动应用，端口默认 `8080`

如需改端口：

```bash
WEB_PORT=8081 MYSQL_PORT=3307 ./scripts/dev-start.sh
```

如遇到 MySQL 容器损坏/无法启动（例如 Docker Desktop/WSL 的挂载残留报错），可强制重建容器（会清空容器数据）：

```bash
RESET_MYSQL=1 ./scripts/dev-start.sh
```

### 3) 访问入口

- 前台首页：`http://127.0.0.1:8080/home/index`
- 后台登录：`http://127.0.0.1:8080/system/login`

## 访问入口（路由）

以下为常用入口（以应用上下文为 `/` 举例）：

- 前台首页：`/home/index`
- 前台登录：`/home/login`
- 前台注册：`/home/reg`
- 后台登录：`/system/login`

## 5.1 默认账号（来自初始化脚本）

数据库脚本 `db_hotel_ssm.sql` 内置了部分测试数据，常用默认账号如下：

- 后台管理员：用户名 `admin`，密码 `admin`
- 前台用户示例：用户名 `猿来入此`，密码 `123456`（更多见 `account` 表数据）

如需自行重置账号，请直接修改数据库对应表数据或在系统内创建。

## 关键配置位置速查

- Web 入口：`WebContent/WEB-INF/web.xml`
  - Spring 容器：`classpath:config/spring/applicationContext.xml`
  - Spring MVC：`classpath:config/springmvc/springmvc.xml`
- Spring：`src/config/spring/applicationContext.xml`
- Spring MVC：`src/config/springmvc/springmvc.xml`
- MyBatis：`src/config/mybatis/mybatis-config.xml` 与 `src/config/mybatis/mapper/**`
- 日志：`src/config/log4j.properties`

## 停止与清理

停止 Jetty（默认不停止 MySQL），并可选停止/删除 MySQL 容器：

```bash
./scripts/dev-stop.sh
# 如需停止 MySQL 容器：
STOP_MYSQL=1 ./scripts/dev-stop.sh
# 如需删除 MySQL 容器（会清空容器数据）：
REMOVE_MYSQL=1 ./scripts/dev-stop.sh
```

## 常见问题排查

1. 页面 404
   - 确认 Jetty 已启动成功，且访问的是 `http://127.0.0.1:8080/...`
   - 检查 `WebContent/WEB-INF/web.xml` 中 `DispatcherServlet` 映射是否为 `/`
2. 数据库连接失败
   - 检查 `src/config/db.properties` 的 URL/用户名/密码
   - 确认 MySQL 端口与库名正确（默认 `db_hotel_ssm`）
3. 数据库中文显示异常（页面出现“å…”或 `mysql` 显示 `???`）
   - `mysql` 显示 `???`：通常是容器内 `mysql` 客户端默认 latin1，查询时加 `--default-character-set=utf8`
   - 页面出现“å…”：通常是导入时未按 UTF-8，按脚本方式重新导入即可
4. 中文乱码
   - `web.xml` 已配置 `CharacterEncodingFilter`，仍乱码时检查 JSP 编码与浏览器缓存
